<!doctype html>
<html>

<head>
  <title>Stacked Bar Chart</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.bundle.js"></script>
  <script src="chart-js-pointer-plugin.js"></script>
</head>

<body>
  <div style="width: 100%">
    <canvas id="canvas"></canvas>
  </div>
  <script>
    var barChartData = {
      labels: ["Course A", "Course B", "Course C"],
      datasets: [
     		{
          label: 'Clifford',
          data: ["50", "30", "60"],
          type: 'bubble',
          fill: true
				},
      {
        label: 'C',
        backgroundColor: "#aad700",
        data: [
          50, 44, 52
        ]
      }, {
        label: 'B',
        backgroundColor: "#ffe100",
        data: [
          20, 34, 24
        ]
      }, {
        label: 'A',
        backgroundColor: "#ef0000",
        data: [
          30, 22, 24
        ]
      }]
    };



  //Create horizontalBar plug-in for ChartJS
  var originalLineDraw = Chart.controllers.horizontalBar.prototype.draw;
  Chart.helpers.extend(Chart.controllers.horizontalBar.prototype, {

      draw: function () {
          originalLineDraw.apply(this, arguments);


          var chart = this.chart;
          var ctx = chart.chart.ctx;

          var series2 = chart.chart.config.data.datasets[0];
          var xaxis = chart.scales['x-axis-0'];
					var yaxis = chart.scales['y-axis-0'];
          var fontSize = 15;
       		console.log(chart);

          if (series2) {
 							 ctx.save();

               series2.data.forEach( function(element, index, array) {


               var centerX = xaxis.getPixelForValue(element);
               var centerY = yaxis.getPixelForTick(index)-yaxis.options.barThickness/2 - fontSize/2;
							 ctx.font='15px FontAwesome';
               ctx.fillText('\uf063',centerX, centerY);
              });



              ctx.restore();
          }
      }
  });


    window.onload = function() {
      var ctx = document.getElementById("canvas").getContext("2d");
      window.myBar = new Chart(ctx, {
        type: 'horizontalBar',
        data: barChartData,
        options: {
          title: {
            display: true,
            text: "Chart.js Bar Chart - Stacked"
          },
          tooltips: {
            mode: 'label'
          },
          responsive: true,
          scales: {
            xAxes: [{
              stacked: true,
              beginAtZero: true,
            }],
            yAxes: [{
              stacked: true,
              barThickness: 30,
              ticks: {
                beginAtZero: true,
                min: 0,
                max: 100
              }
            }]
          }
        }
      });
    };
  </script>
</body>

</html>
